<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="com.iu.base.board.notice.NoticeDAO">
  
  <sql id="search">
  	<where>
  	<if test="kind == 'title'">
  		TITLE LIKE CONCAT('%',#{search},'%')
  	</if>
  	<if test="kind == 'contents'">
  		CONTENTS LIKE CONCAT('%',#{search},'%')
  	</if>
  	<if test="kind == 'writer'">
  		WRITER LIKE CONCAT('%',#{search},'%')
  	</if>
  	</where>
  
  </sql>
  
  
  <insert id="setInsert" parameterType="com.iu.base.board.BoardVO">
  	INSERT INTO NOTICE(TITLE,CONTENTS,WRITER,REGDATE,HIT)
  	VALUES(#{title},#{contents},#{writer},now(),0)
  </insert>
  <update id="setUpdate" parameterType="com.iu.base.board.BoardVO">
      UPDATE NOTICE SET CONTENTS =#{contents} WHERE NUM=#{num}
   
   </update>
   <select id="getDetail" parameterType="com.iu.base.board.BoardVO" resultType="com.iu.base.board.BoardVO">
   	SELECT * FROM NOTICE WHERE NUM=#{num}
   </select>
   
  <select id="getList" resultType="com.iu.base.board.BoardVO" parameterType="Pager">
   	SELECT * FROM NOTICE 
   	<include refid="search"></include>
   	ORDER BY NUM DESC LIMIT #{startRow},10
   </select>
   <select id="getTotalCount" resultType="java.lang.Long">
   	SELECT COUNT(NUM) FROM NOTICE
   </select>
   <delete id="setDelete" parameterType="com.iu.base.board.BoardVO">
      DELETE FROM NOTICE WHERE NUM=#{num}
   </delete>
   
  
  </mapper>